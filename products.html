<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>yianen - Votre boutique en ligne</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .product-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }
        .nav-link {
            transition: all 0.3s ease;
        }
        .nav-link:hover {
            transform: translateY(-2px);
        }
        .loading {
            pointer-events: none;
            overflow: hidden;
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen flex flex-col">
    <!-- Navigation -->
    <nav class="bg-white shadow-md sticky top-0 z-40">
        <div class="container mx-auto px-4 py-3 flex flex-col md:flex-row justify-between items-center">
            <!-- Logo et panier mobile -->
            <div class="flex justify-between w-full md:w-auto items-center mb-4 md:mb-0">
                <h1 class="text-xl font-bold text-indigo-600 flex items-center cursor-pointer" id="logo">
                    <i class="fas fa-shopping-bag mr-2"></i>yianen
                </h1>
                <div class="flex items-center space-x-4 md:hidden">
                    <button id="cart-icon-mobile" class="relative p-2 text-gray-700 hover:text-indigo-600 transition-colors">
                        <i class="fas fa-shopping-cart text-xl"></i>
                        <span id="cart-count-mobile" class="absolute -top-1 -right-1 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs">0</span>
                    </button>
                    <button id="mobile-menu-toggle" class="p-2 text-gray-700">
                        <i class="fas fa-bars text-xl"></i>
                    </button>
                </div>
            </div>

            <!-- Navigation principale -->
            <div id="nav-links" class="hidden md:flex flex-col md:flex-row space-y-2 md:space-y-0 md:space-x-2 w-full md:w-auto bg-white md:bg-transparent p-4 md:p-0 rounded-lg shadow-md md:shadow-none">
                <a href="index.html" class="nav-link">
                    <button class="w-full md:w-auto bg-indigo-500 hover:bg-indigo-600 text-white px-4 py-2 rounded-lg flex items-center justify-center transition-colors">
                        <i class="fas fa-home mr-2"></i> Accueil
                    </button>
                </a>
                <a href="products.html" class="nav-link">
                    <button class="w-full md:w-auto bg-indigo-500 hover:bg-indigo-600 text-white px-4 py-2 rounded-lg flex items-center justify-center transition-colors">
                        <i class="fas fa-shopping-bag mr-2"></i> Produits
                    </button>
                </a>
                <a href="command.html" class="nav-link">
                    <button class="w-full md:w-auto bg-indigo-500 hover:bg-indigo-600 text-white px-4 py-2 rounded-lg flex items-center justify-center transition-colors">
                        <i class="fas fa-clipboard-list mr-2"></i> Suivi de commande
                    </button>
                </a>
                <a href="about.html" class="nav-link">
                    <button class="w-full md:w-auto bg-indigo-500 hover:bg-indigo-600 text-white px-4 py-2 rounded-lg flex items-center justify-center transition-colors">
                        <i class="fas fa-info-circle mr-2"></i> À propos
                    </button>
                </a>
                <a href="contact.html" class="nav-link">
                    <button class="w-full md:w-auto bg-indigo-500 hover:bg-indigo-600 text-white px-4 py-2 rounded-lg flex items-center justify-center transition-colors">
                        <i class="fas fa-phone mr-2"></i> Contact
                    </button>
                </a>
            </div>

            <!-- Actions utilisateur -->
            <div class="hidden md:flex items-center space-x-4">
                <button id="cart-icon" class="relative p-2 text-gray-700 hover:text-indigo-600 transition-colors">
                    <i class="fas fa-shopping-cart text-xl"></i>
                    <span id="cart-count" class="absolute -top-1 -right-1 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs">0</span>
                </button>
                <div id="auth-buttons" class="flex space-x-2">
                    <a href="login.html">
                        <button class="bg-indigo-500 hover:bg-indigo-600 text-white px-4 py-2 rounded-lg flex items-center transition-colors">
                            <i class="fas fa-sign-in-alt mr-2"></i> Connexion
                        </button>
                    </a>
                    <a href="register.html">
                        <button class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg flex items-center transition-colors">
                            <i class="fas fa-user-plus mr-2"></i> Inscription
                        </button>
                    </a>
                </div>
                <div id="user-info" class="hidden items-center space-x-4">
                    <span id="user-name" class="text-gray-700"></span>
                    <button id="profile-btn" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg flex items-center transition-colors">
                        <i class="fas fa-user mr-2"></i> Profil
                    </button>
                    <button id="logout-btn" class="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg flex items-center transition-colors">
                        <i class="fas fa-sign-out-alt mr-2"></i> Déconnexion
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Contenu principal -->
    <main class="flex-grow container mx-auto px-4 py-8">
        <!-- Page d'accueil (produits) -->
        <section id="home-page" class="fade-in">
            <div class="mb-8">
                <h2 class="text-3xl font-bold text-gray-800 mb-2">Nos Produits</h2>
                <p class="text-gray-600">Découvrez notre sélection de produits high-tech</p>
            </div>
            
            <!-- Barre de recherche et filtres -->
            <div class="bg-white p-4 rounded-lg shadow mb-6">
                <div class="flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0">
                    <div class="w-full md:w-auto">
                        <div class="relative">
                            <input type="text" id="search-input" placeholder="Rechercher un produit..." class="w-full md:w-64 pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500">
                            <i class="fas fa-search absolute left-3 top-3 text-gray-400"></i>
                        </div>
                    </div>
                    <div class="flex space-x-2">
                        <label for="category-filter" class="sr-only">Filtrer par catégorie</label>
                        <select id="category-filter" class="px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500">
                            <option value="all">Toutes les catégories</option>
                            <option value="smartphone">Smartphones</option>
                            <option value="laptop">Ordinateurs</option>
                            <option value="accessory">Accessoires</option>
                        </select>
                        <label for="sort-by" class="sr-only">Trier par</label>
                        <select id="sort-by" class="px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500">
                            <option value="name">Trier par nom</option>
                            <option value="price-asc">Prix croissant</option>
                            <option value="price-desc">Prix décroissant</option>
                        </select>
                    </div>
                </div>
            </div>
            
            <div id="products-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Les produits seront chargés ici -->
            </div>
        </section>

        <!-- Page de détails du produit -->
        <section id="product-detail-page" class="hidden max-w-6xl mx-auto bg-white p-6 rounded-lg shadow-md fade-in">
            <!-- Le contenu des détails du produit sera chargé ici dynamiquement -->
        </section>

        <!-- Panier -->
        <section id="cart-page" class="hidden max-w-4xl mx-auto bg-white p-6 rounded-lg shadow-md fade-in">
            <h2 class="text-2xl font-bold mb-6 text-gray-800">Votre Panier</h2>
            <div id="cart-items">
                <!-- Les articles du panier seront affichés ici -->
            </div>
            <div class="mt-8 p-4 bg-gray-50 rounded-lg">
                <div class="flex justify-between items-center mb-4">
                    <div class="text-lg font-semibold text-gray-700">Sous-total:</div>
                    <div class="text-lg font-semibold" id="cart-subtotal">0.00 €</div>
                </div>
                <div class="flex justify-between items-center mb-4">
                    <div class="text-lg font-semibold text-gray-700">Frais de livraison:</div>
                    <div class="text-lg font-semibold" id="shipping-cost">0.00 €</div>
                </div>
                <div class="flex justify-between items-center border-t border-gray-300 pt-4">
                    <div class="text-xl font-bold text-gray-800">Total:</div>
                    <div class="text-xl font-bold text-indigo-600" id="cart-total">0.00 €</div>
                </div>
            </div>
            <div class="mt-6 flex justify-between items-center">
                <button id="continue-shopping" class="bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg font-medium flex items-center transition-colors">
                    <i class="fas fa-arrow-left mr-2"></i> Continuer mes achats
                </button>
                <button id="checkout-btn" class="bg-indigo-500 hover:bg-indigo-600 text-white px-4 py-2 rounded-lg font-medium flex items-center transition-colors">
                    <i class="fas fa-credit-card mr-2"></i> Procéder au paiement
                </button>
            </div>
        </section>

        <!-- Pages d'authentification (simplifiées pour cet exemple) -->
        <section id="login-page" class="hidden max-w-md mx-auto bg-white p-6 rounded-lg shadow-md fade-in">
            <h2 class="text-2xl font-bold mb-6 text-center text-gray-800">Connexion</h2>
            <form id="email-login-form" class="space-y-4">
                <div>
                    <label for="login-email" class="block text-sm font-medium text-gray-700 mb-1">Email</label>
                    <input type="email" id="login-email" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500">
                </div>
                <div>
                    <label for="login-password" class="block text-sm font-medium text-gray-700 mb-1">Mot de passe</label>
                    <input type="password" id="login-password" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500">
                </div>
                <button type="submit" class="w-full bg-indigo-500 hover:bg-indigo-600 text-white py-2 rounded-lg font-medium transition-colors">
                    Se connecter
                </button>
            </form>
            <div class="mt-4 text-center">
                <button id="back-to-home" class="text-indigo-600 hover:underline">Retour à l'accueil</button>
            </div>
        </section>

        <section id="register-page" class="hidden max-w-md mx-auto bg-white p-6 rounded-lg shadow-md fade-in">
            <h2 class="text-2xl font-bold mb-6 text-center text-gray-800">Inscription</h2>
            <form id="register-form" class="space-y-4">
                <div>
                    <label for="register-name" class="block text-sm font-medium text-gray-700 mb-1">Nom complet</label>
                    <input type="text" id="register-name" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500">
                </div>
                <div>
                    <label for="register-email" class="block text-sm font-medium text-gray-700 mb-1">Email</label>
                    <input type="email" id="register-email" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500">
                </div>
                <div>
                    <label for="register-phone" class="block text-sm font-medium text-gray-700 mb-1">Téléphone</label>
                    <input type="tel" id="register-phone" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500">
                </div>
                <div>
                    <label for="register-password" class="block text-sm font-medium text-gray-700 mb-1">Mot de passe</label>
                    <input type="password" id="register-password" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500">
                </div>
                <div>
                    <label for="confirm-password" class="block text-sm font-medium text-gray-700 mb-1">Confirmer le mot de passe</label>
                    <input type="password" id="confirm-password" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500">
                </div>
                <button type="submit" class="w-full bg-green-500 hover:bg-green-600 text-white py-2 rounded-lg font-medium transition-colors">
                    S'inscrire
                </button>
            </form>
            <div class="mt-4 text-center">
                <button id="back-to-login" class="text-indigo-600 hover:underline">Retour à la connexion</button>
            </div>
        </section>

        <!-- Page profil -->
        <section id="profile-page" class="hidden max-w-2xl mx-auto bg-white p-6 rounded-lg shadow-md fade-in">
            <h2 class="text-2xl font-bold mb-6 text-gray-800">Mon Profil</h2>
            <div class="space-y-4 mb-6">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Nom</label>
                    <p id="profile-name" class="text-gray-800 font-medium">-</p>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Email</label>
                    <p id="profile-email" class="text-gray-800">-</p>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Téléphone</label>
                    <p id="profile-phone" class="text-gray-800">-</p>
                </div>
            </div>
            <h3 class="text-xl font-semibold mb-4 text-gray-800">Historique des commandes</h3>
            <div id="order-history" class="space-y-3">
                <!-- Les commandes seront affichées ici -->
            </div>
            <div class="mt-6">
                <button id="back-to-home-from-profile" class="bg-indigo-500 hover:bg-indigo-600 text-white px-4 py-2 rounded-lg font-medium flex items-center transition-colors">
                    <i class="fas fa-arrow-left mr-2"></i> Retour à l'accueil
                </button>
            </div>
        </section>
    </main>

    <!-- Overlay de chargement -->
    <div id="loading-overlay" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-white p-6 rounded-lg shadow-lg flex items-center space-x-3">
            <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"></div>
            <span class="text-gray-700">Chargement...</span>
        </div>
    </div>

    <!-- Alertes -->
    <div id="alert" class="hidden fixed top-4 right-4 p-4 rounded-lg shadow-lg max-w-sm z-50">
        <div class="flex items-center justify-between">
            <div class="flex items-center">
                <span id="alert-icon" class="mr-3"></span>
                <span id="alert-message" class="text-white"></span>
            </div>
            <button id="close-alert" class="ml-4 text-white hover:text-gray-200">
                <i class="fas fa-times"></i>
            </button>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-8 mt-12">
        <div class="container mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div>
                    <h3 class="text-xl font-bold mb-4">yianen</h3>
                    <p class="text-gray-400">Votre boutique en ligne de produits high-tech. Nous proposons les dernières innovations au meilleur prix.</p>
                </div>
                <div>
                    <h3 class="text-lg font-semibold mb-4">Liens rapides</h3>
                    <ul class="space-y-2">
                        <li><a href="index.html" class="text-gray-400 hover:text-white transition-colors">Accueil</a></li>
                        <li><a href="products.html" class="text-gray-400 hover:text-white transition-colors">Produits</a></li>
                        <li><a href="about.html" class="text-gray-400 hover:text-white transition-colors">À propos</a></li>
                        <li><a href="contact.html" class="text-gray-400 hover:text-white transition-colors">Contact</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-lg font-semibold mb-4">Contact</h3>
                    <ul class="space-y-2 text-gray-400">
                        <li class="flex items-center"><i class="fas fa-map-marker-alt mr-2"></i> 123 Rue de la Tech, Paris</li>
                        <li class="flex items-center"><i class="fas fa-phone mr-2"></i> +33 1 23 45 67 89</li>
                        <li class="flex items-center"><i class="fas fa-envelope mr-2"></i> contact@yianen.fr</li>
                    </ul>
                </div>
            </div>
            <div class="border-t border-gray-700 mt-8 pt-6 text-center text-gray-400">
                <p>&copy; 2023 yianen. Tous droits réservés.</p>
            </div>
        </div>
    </footer>

    <script>
        // Base de données simulée
        const database = {
            users: JSON.parse(localStorage.getItem('users')) || [
                {
                    id: 1,
                    name: "Admin User",
                    email: "admin@example.com",
                    phone: "+33123456789",
                    password: "password123",
                    orders: []
                }
            ],
            
            products: [
                { 
                    id: 1, 
                    name: 'iPhone 14 Pro', 
                    price: 1259.99, 
                    image: 'https://images.unsplash.com/photo-1592899677977-9c10ca588bbd?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=500&q=80', 
                    description: 'Dernier smartphone Apple avec écran Dynamic Island',
                    category: 'smartphone',
                    featured: true,
                    details: {
                        brand: 'Apple',
                        screen: '6.1 pouces Super Retina XDR',
                        storage: '128GB, 256GB, 512GB, 1TB',
                        camera: 'Système triple caméra: 48MP + 12MP + 12MP',
                        battery: 'Jusqu\'à 23 heures de lecture vidéo',
                        colors: ['Argent', 'Or', 'Graphite', 'Bleu sierra'],
                        specifications: [
                            'Chip A16 Bionic',
                            'iOS 16',
                            'Résistance à l\'eau IP68',
                            'Face ID',
                            '5G'
                        ]
                    },
                    images: [
                        'https://images.unsplash.com/photo-1592899677977-9c10ca588bbd?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=500&q=80',
                        'https://images.unsplash.com/photo-1511707171634-5f897ff02aa9?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=500&q=80',
                        'https://images.unsplash.com/photo-1589492477829-5e65395b66cc?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=500&q=80'
                    ]
                },
                { 
                    id: 2, 
                    name: 'MacBook Pro 16"', 
                    price: 2499.99, 
                    image: 'https://images.unsplash.com/photo-1517336714731-489689fd1ca8?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=500&q=80', 
                    description: 'Ordinateur portable professionnel avec puce M2',
                    category: 'laptop',
                    featured: true,
                    details: {
                        brand: 'Apple',
                        screen: '16.2 pouces Liquid Retina XDR',
                        storage: '512GB, 1TB, 2TB, 4TB, 8TB',
                        processor: 'Apple M2 Pro ou M2 Max',
                        memory: '16GB, 32GB, 64GB, 96GB unifiée',
                        battery: 'Jusqu\'à 22 heures de lecture vidéo',
                        colors: ['Gris sidéral', 'Argent'],
                        specifications: [
                            'Écran Liquid Retina XDR',
                            'Jusqu\'à 96 Go de mémoire unifiée',
                            'Jusqu\'à 8 To de SSD',
                            'Ports: HDMI, SDXC, MagSafe 3, Thunderbolt 4',
                            'Wi-Fi 6E et Bluetooth 5.3'
                        ]
                    },
                    images: [
                        'https://images.unsplash.com/photo-1517336714731-489689fd1ca8?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=500&q=80',
                        'https://images.unsplash.com/photo-1541807084-5c52b6b3adef?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=500&q=80',
                        'https://images.unsplash.com/photo-1496181133206-80ce9b88a853?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=500&q=80'
                    ]
                },
                { 
                    id: 3, 
                    name: 'AirPods Pro', 
                    price: 279.99, 
                    image: 'https://images.unsplash.com/photo-1600294037681-c80b4cb5b434?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=500&q=80', 
                    description: 'Écouteurs sans fil avec réduction de bruit active',
                    category: 'accessory',
                    featured: false,
                    details: {
                        brand: 'Apple',
                        battery: 'Jusqu\'à 6 heures d\'écoute (avec réduction de bruit active)',
                        connectivity: 'Bluetooth 5.3',
                        charging: 'Boîtier de charge MagSafe, Lightning ou sans fil',
                        features: ['Réduction de bruit active', 'Mode Transparence', 'Audio spatial', 'Résistance à la sueur et à l\'eau'],
                        colors: ['Blanc'],
                        specifications: [
                            'Chip H2',
                            'Réduction de bruit active',
                            'Audio spatial personnalisé',
                            'Boîtier de charge MagSafe',
                            'Autonomie: jusqu\'à 30 heures avec le boîtier'
                        ]
                    },
                    images: [
                        'https://images.unsplash.com/photo-1600294037681-c80b4cb5b434?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=500&q=80',
                        'https://images.unsplash.com/photo-1626840070612-108a0c0c0f6e?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=500&q=80',
                        'https://images.unsplash.com/photo-1599660663713-71baca8c6c68?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=500&q=80'
                    ]
                }
            ],
            
            orders: JSON.parse(localStorage.getItem('orders')) || []
        };

        // Variables globales
        let currentUser = JSON.parse(localStorage.getItem('currentUser')) || null;
        let cart = JSON.parse(localStorage.getItem('cart')) || [];
        let currentProductDetail = null;

        // Initialisation de l'application
        function initApp() {
            // Écouteurs d'événements pour la navigation
            document.getElementById('mobile-menu-toggle').addEventListener('click', toggleMobileMenu);
            document.getElementById('cart-icon').addEventListener('click', () => showPage('cart'));
            document.getElementById('cart-icon-mobile').addEventListener('click', () => showPage('cart'));
            document.getElementById('logo').addEventListener('click', () => showPage('home'));
            document.getElementById('profile-btn').addEventListener('click', () => showPage('profile'));
            document.getElementById('logout-btn').addEventListener('click', handleLogout);
            document.getElementById('continue-shopping').addEventListener('click', () => showPage('home'));
            document.getElementById('back-to-home').addEventListener('click', () => showPage('home'));
            document.getElementById('back-to-login').addEventListener('click', () => showPage('login'));
            document.getElementById('back-to-home-from-profile').addEventListener('click', () => showPage('home'));
            document.getElementById('close-alert').addEventListener('click', hideAlert);

            // Écouteurs d'événements pour les formulaires
            document.getElementById('email-login-form').addEventListener('submit', handleEmailLogin);
            document.getElementById('register-form').addEventListener('submit', handleRegister);
            document.getElementById('checkout-btn').addEventListener('click', handleCheckout);

            // Écouteurs d'événements pour les filtres
            document.getElementById('search-input').addEventListener('input', filterProducts);
            document.getElementById('category-filter').addEventListener('change', filterProducts);
            document.getElementById('sort-by').addEventListener('change', filterProducts);

            // Charger les produits
            loadProducts();

            // Mettre à jour l'interface utilisateur
            updateUI();

            // Vérifier si l'utilisateur est connecté
            if (currentUser) {
                showAlert(`Bienvenue, ${currentUser.name} !`, 'success');
            }
        }

        // Afficher une page et masquer les autres
        function showPage(page) {
            document.getElementById('home-page').classList.add('hidden');
            document.getElementById('login-page').classList.add('hidden');
            document.getElementById('register-page').classList.add('hidden');
            document.getElementById('cart-page').classList.add('hidden');
            document.getElementById('profile-page').classList.add('hidden');
            document.getElementById('product-detail-page').classList.add('hidden');

            if (page === 'home') {
                document.getElementById('home-page').classList.remove('hidden');
                filterProducts();
            } else if (page === 'login') {
                document.getElementById('login-page').classList.remove('hidden');
            } else if (page === 'register') {
                document.getElementById('register-page').classList.remove('hidden');
            } else if (page === 'cart') {
                document.getElementById('cart-page').classList.remove('hidden');
                renderCart();
            } else if (page === 'profile') {
                document.getElementById('profile-page').classList.remove('hidden');
                renderProfile();
            } else if (page === 'product-detail') {
                document.getElementById('product-detail-page').classList.remove('hidden');
            }
        }

        // Basculer le menu mobile
        function toggleMobileMenu() {
            const navLinks = document.getElementById('nav-links');
            navLinks.classList.toggle('hidden');
        }

        // Mettre à jour l'interface utilisateur
        function updateUI() {
            if (currentUser) {
                document.getElementById('user-name').textContent = currentUser.name;
                document.getElementById('user-info').classList.remove('hidden');
                document.getElementById('auth-buttons').classList.add('hidden');
            } else {
                document.getElementById('user-info').classList.add('hidden');
                document.getElementById('auth-buttons').classList.remove('hidden');
            }
            
            updateCartUI();
        }

        // Gérer la connexion par email
        function handleEmailLogin(e) {
            e.preventDefault();
            showLoading(true);

            const email = document.getElementById('login-email').value;
            const password = document.getElementById('login-password').value;

            setTimeout(() => {
                const user = database.users.find(u => u.email === email && u.password === password);
                
                if (user) {
                    currentUser = user;
                    localStorage.setItem('currentUser', JSON.stringify(currentUser));
                    showLoading(false);
                    showAlert('Connexion réussie!', 'success');
                    showPage('home');
                    updateUI();
                } else {
                    showLoading(false);
                    showAlert('Email ou mot de passe incorrect.', 'error');
                }
            }, 1000);
        }

        // Gérer l'inscription
        function handleRegister(e) {
            e.preventDefault();
            showLoading(true);

            const name = document.getElementById('register-name').value;
            const email = document.getElementById('register-email').value;
            const phone = document.getElementById('register-phone').value;
            const password = document.getElementById('register-password').value;
            const confirmPassword = document.getElementById('confirm-password').value;

            if (password !== confirmPassword) {
                showLoading(false);
                showAlert('Les mots de passe ne correspondent pas.', 'error');
                return;
            }

            if (database.users.find(u => u.email === email)) {
                showLoading(false);
                showAlert('Un compte avec cet email existe déjà.', 'error');
                return;
            }

            setTimeout(() => {
                const newUser = {
                    id: database.users.length + 1,
                    name,
                    email,
                    phone,
                    password,
                    orders: []
                };
                
                database.users.push(newUser);
                localStorage.setItem('users', JSON.stringify(database.users));
                
                currentUser = newUser;
                localStorage.setItem('currentUser', JSON.stringify(currentUser));
                
                showLoading(false);
                showAlert('Inscription réussie!', 'success');
                showPage('home');
                updateUI();
            }, 1000);
        }

        // Gérer la déconnexion
        function handleLogout() {
            showLoading(true);
            
            setTimeout(() => {
                currentUser = null;
                localStorage.removeItem('currentUser');
                showLoading(false);
                showAlert('Déconnexion réussie!', 'success');
                updateUI();
            }, 500);
        }

        // Charger les produits
        function loadProducts() {
            renderProducts(database.products);
        }

        // Filtrer et trier les produits
        function filterProducts() {
            const searchTerm = document.getElementById('search-input').value.toLowerCase();
            const category = document.getElementById('category-filter').value;
            const sort = document.getElementById('sort-by').value;
            
            let filteredProducts = database.products.filter(product => {
                const matchesSearch = product.name.toLowerCase().includes(searchTerm) || 
                                     product.description.toLowerCase().includes(searchTerm);
                const matchesCategory = category === 'all' || product.category === category;
                
                return matchesSearch && matchesCategory;
            });
            
            if (sort === 'name') {
                filteredProducts.sort((a, b) => a.name.localeCompare(b.name));
            } else if (sort === 'price-asc') {
                filteredProducts.sort((a, b) => a.price - b.price);
            } else if (sort === 'price-desc') {
                filteredProducts.sort((a, b) => b.price - a.price);
            }
            
            renderProducts(filteredProducts);
        }

        // Afficher les produits
        function renderProducts(products) {
            const productsGrid = document.getElementById('products-grid');
            productsGrid.innerHTML = '';
            
            if (products.length === 0) {
                productsGrid.innerHTML = `
                    <div class="col-span-full text-center py-12">
                        <i class="fas fa-search text-4xl text-gray-400 mb-4"></i>
                        <h3 class="text-xl font-semibold text-gray-700">Aucun produit trouvé</h3>
                        <p class="text-gray-500 mt-2">Essayez de modifier vos critères de recherche</p>
                    </div>
                `;
                return;
            }
            
            products.forEach(product => {
                const productCard = document.createElement('div');
                productCard.className = 'bg-white rounded-lg shadow-md overflow-hidden product-card';
                productCard.innerHTML = `
                    <div class="relative">
                        <img src="${product.image}" alt="${product.name}" class="w-full h-48 object-cover product-image cursor-pointer" data-id="${product.id}">
                        ${product.featured ? '<span class="absolute top-2 right-2 bg-indigo-500 text-white text-xs font-bold px-2 py-1 rounded">Populaire</span>' : ''}
                    </div>
                    <div class="p-4">
                        <h3 class="text-lg font-semibold text-gray-800 cursor-pointer hover:text-indigo-600 transition-colors view-product-detail" data-id="${product.id}">${product.name}</h3>
                        <p class="text-gray-600 text-sm mt-1">${product.description}</p>
                        <div class="flex justify-between items-center mt-4">
                            <span class="text-xl font-bold text-indigo-600">${product.price.toFixed(2)} €</span>
                            <div class="flex space-x-2">
                                <button class="view-details bg-gray-500 hover:bg-gray-600 text-white px-3 py-2 rounded-lg flex items-center transition-colors" data-id="${product.id}">
                                    <i class="fas fa-eye mr-1"></i> Détails
                                </button>
                                <button class="add-to-cart bg-indigo-500 hover:bg-indigo-600 text-white px-3 py-2 rounded-lg flex items-center transition-colors" data-id="${product.id}">
                                    <i class="fas fa-cart-plus mr-1"></i> Ajouter
                                </button>
                            </div>
                        </div>
                    </div>
                `;
                productsGrid.appendChild(productCard);
            });

            // Ajouter les écouteurs d'événements
            document.querySelectorAll('.add-to-cart').forEach(button => {
                button.addEventListener('click', (e) => {
                    const productId = parseInt(e.target.closest('.add-to-cart').getAttribute('data-id'));
                    addToCart(productId);
                });
            });

            document.querySelectorAll('.view-details, .view-product-detail, .product-image').forEach(element => {
                element.addEventListener('click', (e) => {
                    const productId = parseInt(e.target.getAttribute('data-id'));
                    showProductDetail(productId);
                });
            });
        }

        // Afficher les détails d'un produit
        function showProductDetail(productId) {
            const product = database.products.find(p => p.id === productId);
            
            if (!product) {
                showAlert('Produit non trouvé', 'error');
                return;
            }
            
            currentProductDetail = product;
            
            const productDetailPage = document.getElementById('product-detail-page');
            productDetailPage.innerHTML = `
                <div class="flex flex-col md:flex-row gap-8">
                    <div class="md:w-1/2">
                        <div class="mb-4">
                            <img src="${product.images[0]}" alt="${product.name}" class="w-full h-96 object-cover rounded-lg product-image" id="main-product-image">
                        </div>
                        <div class="grid grid-cols-3 gap-2">
                            ${product.images.map((image, index) => `
                                <img src="${image}" alt="${product.name} - Vue ${index + 1}" 
                                     class="w-full h-24 object-cover rounded cursor-pointer border-2 ${index === 0 ? 'border-indigo-500' : 'border-transparent'} product-thumbnail" 
                                     data-image="${image}">
                            `).join('')}
                        </div>
                    </div>
                    
                    <div class="md:w-1/2">
                        <button id="back-to-products" class="mb-4 text-indigo-600 hover:underline font-medium flex items-center transition-colors">
                            <i class="fas fa-arrow-left mr-2"></i> Retour aux produits
                        </button>
                        
                        <h1 class="text-3xl font-bold text-gray-800 mb-2">${product.name}</h1>
                        <p class="text-gray-600 mb-4">${product.description}</p>
                        
                        <div class="mb-6">
                            <span class="text-2xl font-bold text-indigo-600">${product.price.toFixed(2)} €</span>
                            <span class="ml-2 text-green-600 font-medium">En stock</span>
                        </div>
                        
                        <div class="mb-6">
                            <div class="flex items-center space-x-4 mb-4">
                                <span class="font-semibold">Quantité:</span>
                                <div class="flex items-center border border-gray-300 rounded">
                                    <button class="quantity-btn px-3 py-1 text-gray-600 hover:bg-gray-100" id="decrease-quantity">-</button>
                                    <span class="px-4 py-1" id="product-quantity">1</span>
                                    <button class="quantity-btn px-3 py-1 text-gray-600 hover:bg-gray-100" id="increase-quantity">+</button>
                                </div>
                            </div>
                            
                            <div class="flex space-x-3">
                                <button id="add-to-cart-detail" class="bg-indigo-500 hover:bg-indigo-600 text-white px-6 py-3 rounded-lg font-medium flex items-center transition-colors flex-1 justify-center">
                                    <i class="fas fa-cart-plus mr-2"></i> Ajouter au panier
                                </button>
                                <button id="buy-now" class="bg-green-500 hover:bg-green-600 text-white px-6 py-3 rounded-lg font-medium flex items-center transition-colors flex-1 justify-center">
                                    <i class="fas fa-bolt mr-2"></i> Acheter maintenant
                                </button>
                            </div>
                        </div>
                        
                        <div class="mb-6">
                            <h3 class="text-xl font-semibold mb-3 text-gray-800">Caractéristiques</h3>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                ${product.details.specifications.map(spec => `
                                    <div class="flex items-start">
                                        <i class="fas fa-check text-green-500 mt-1 mr-2"></i>
                                        <span>${spec}</span>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            // Ajouter les écouteurs d'événements
            document.getElementById('back-to-products').addEventListener('click', () => showPage('home'));
            document.getElementById('add-to-cart-detail').addEventListener('click', () => {
                const quantity = parseInt(document.getElementById('product-quantity').textContent);
                addToCart(product.id, quantity);
            });
            document.getElementById('buy-now').addEventListener('click', () => {
                const quantity = parseInt(document.getElementById('product-quantity').textContent);
                addToCart(product.id, quantity);
                showPage('cart');
            });
            document.getElementById('decrease-quantity').addEventListener('click', () => {
                const quantityElement = document.getElementById('product-quantity');
                let quantity = parseInt(quantityElement.textContent);
                if (quantity > 1) {
                    quantityElement.textContent = quantity - 1;
                }
            });
            document.getElementById('increase-quantity').addEventListener('click', () => {
                const quantityElement = document.getElementById('product-quantity');
                let quantity = parseInt(quantityElement.textContent);
                quantityElement.textContent = quantity + 1;
            });
            
            document.querySelectorAll('.product-thumbnail').forEach(thumbnail => {
                thumbnail.addEventListener('click', (e) => {
                    const imageSrc = e.target.getAttribute('data-image');
                    document.getElementById('main-product-image').src = imageSrc;
                    
                    document.querySelectorAll('.product-thumbnail').forEach(img => {
                        img.classList.remove('border-indigo-500');
                        img.classList.add('border-transparent');
                    });
                    e.target.classList.remove('border-transparent');
                    e.target.classList.add('border-indigo-500');
                });
            });
            
            showPage('product-detail');
        }

        // Ajouter un produit au panier
        function addToCart(productId, quantity = 1) {
            const product = database.products.find(p => p.id === productId);
            
            if (product) {
                const existingItem = cart.find(item => item.id === productId);
                
                if (existingItem) {
                    existingItem.quantity += quantity;
                } else {
                    cart.push({
                        id: product.id,
                        name: product.name,
                        price: product.price,
                        image: product.image,
                        quantity: quantity
                    });
                }
                
                localStorage.setItem('cart', JSON.stringify(cart));
                updateCartUI();
                showAlert(`${product.name} ajouté au panier!`, 'success');
            }
        }

        // Mettre à jour l'interface utilisateur du panier
        function updateCartUI() {
            const totalItems = cart.reduce((total, item) => total + item.quantity, 0);
            document.getElementById('cart-count').textContent = totalItems;
            document.getElementById('cart-count-mobile').textContent = totalItems;
        }

        // Afficher le contenu du panier
        function renderCart() {
            const cartItems = document.getElementById('cart-items');
            cartItems.innerHTML = '';
            
            if (cart.length === 0) {
                cartItems.innerHTML = `
                    <div class="text-center py-8">
                        <i class="fas fa-shopping-cart text-4xl text-gray-400 mb-4"></i>
                        <h3 class="text-xl font-semibold text-gray-700">Votre panier est vide</h3>
                        <p class="text-gray-500 mt-2">Ajoutez des produits pour continuer</p>
                    </div>
                `;
                document.getElementById('checkout-btn').disabled = true;
                return;
            }
            
            document.getElementById('checkout-btn').disabled = false;
            
            let subtotal = 0;
            
            cart.forEach(item => {
                const itemTotal = item.price * item.quantity;
                subtotal += itemTotal;
                
                const cartItem = document.createElement('div');
                cartItem.className = 'flex items-center border-b border-gray-200 py-4';
                cartItem.innerHTML = `
                    <div class="flex-shrink-0 w-16 h-16 bg-gray-200 rounded-lg overflow-hidden">
                        <img src="${item.image}" alt="${item.name}" class="w-full h-full object-cover">
                    </div>
                    <div class="ml-4 flex-grow">
                        <h3 class="font-semibold text-gray-800">${item.name}</h3>
                        <p class="text-gray-600">${item.price.toFixed(2)} €</p>
                    </div>
                    <div class="flex items-center">
                        <button class="decrease-quantity bg-gray-200 hover:bg-gray-300 rounded-l px-3 py-1 text-gray-700 quantity-btn" data-id="${item.id}">-</button>
                        <span class="px-3 py-1 bg-gray-100 text-gray-800">${item.quantity}</span>
                        <button class="increase-quantity bg-gray-200 hover:bg-gray-300 rounded-r px-3 py-1 text-gray-700 quantity-btn" data-id="${item.id}">+</button>
                        <button class="remove-item text-red-500 hover:text-red-700 ml-4 transition-colors" data-id="${item.id}">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                `;
                cartItems.appendChild(cartItem);
            });
            
            const shipping = subtotal > 0 ? 4.99 : 0;
            const total = subtotal + shipping;
            
            document.getElementById('cart-subtotal').textContent = `${subtotal.toFixed(2)} €`;
            document.getElementById('shipping-cost').textContent = `${shipping.toFixed(2)} €`;
            document.getElementById('cart-total').textContent = `${total.toFixed(2)} €`;
            
            document.querySelectorAll('.increase-quantity').forEach(button => {
                button.addEventListener('click', (e) => {
                    const productId = parseInt(e.target.closest('button').getAttribute('data-id'));
                    updateQuantity(productId, 1);
                });
            });
            
            document.querySelectorAll('.decrease-quantity').forEach(button => {
                button.addEventListener('click', (e) => {
                    const productId = parseInt(e.target.closest('button').getAttribute('data-id'));
                    updateQuantity(productId, -1);
                });
            });
            
            document.querySelectorAll('.remove-item').forEach(button => {
                button.addEventListener('click', (e) => {
                    const productId = parseInt(e.target.closest('button').getAttribute('data-id'));
                    removeFromCart(productId);
                });
            });
        }

        // Mettre à jour la quantité d'un produit dans le panier
        function updateQuantity(productId, change) {
            const item = cart.find(item => item.id === productId);
            
            if (item) {
                item.quantity += change;
                
                if (item.quantity <= 0) {
                    removeFromCart(productId);
                } else {
                    localStorage.setItem('cart', JSON.stringify(cart));
                    updateCartUI();
                    renderCart();
                }
            }
        }

        // Retirer un produit du panier
        function removeFromCart(productId) {
            cart = cart.filter(item => item.id !== productId);
            localStorage.setItem('cart', JSON.stringify(cart));
            updateCartUI();
            renderCart();
            showAlert('Produit retiré du panier', 'info');
        }

        // Gérer la commande
        function handleCheckout() {
            if (cart.length === 0) {
                showAlert('Votre panier est vide', 'error');
                return;
            }
            
            if (!currentUser) {
                showAlert('Veuillez vous connecter pour passer commande', 'error');
                showPage('login');
                return;
            }
            
            showLoading(true);
            
            setTimeout(() => {
                const order = {
                    id: database.orders.length + 1,
                    userId: currentUser.id,
                    items: [...cart],
                    total: parseFloat(document.getElementById('cart-total').textContent),
                    date: new Date().toISOString(),
                    status: 'confirmed'
                };
                
                database.orders.push(order);
                localStorage.setItem('orders', JSON.stringify(database.orders));
                
                currentUser.orders.push(order.id);
                const userIndex = database.users.findIndex(u => u.id === currentUser.id);
                database.users[userIndex] = currentUser;
                localStorage.setItem('users', JSON.stringify(database.users));
                localStorage.setItem('currentUser', JSON.stringify(currentUser));
                
                cart = [];
                localStorage.setItem('cart', JSON.stringify(cart));
                
                showLoading(false);
                showAlert('Commande passée avec succès!', 'success');
                updateCartUI();
                renderCart();
                showPage('home');
            }, 2000);
        }

        // Afficher le profil utilisateur
        function renderProfile() {
            if (!currentUser) {
                showPage('login');
                return;
            }
            
            document.getElementById('profile-name').textContent = currentUser.name;
            document.getElementById('profile-email').textContent = currentUser.email;
            document.getElementById('profile-phone').textContent = currentUser.phone || 'Non renseigné';
            
            const orderHistory = document.getElementById('order-history');
            const userOrders = database.orders.filter(order => order.userId === currentUser.id);
            
            if (userOrders.length === 0) {
                orderHistory.innerHTML = '<p class="text-gray-500 text-center">Aucune commande passée pour le moment</p>';
            } else {
                orderHistory.innerHTML = '';
                userOrders.forEach(order => {
                    const orderElement = document.createElement('div');
                    orderElement.className = 'mb-4 p-3 bg-white rounded-lg border border-gray-200';
                    orderElement.innerHTML = `
                        <div class="flex justify-between items-center">
                            <div>
                                <h4 class="font-semibold">Commande #${order.id}</h4>
                                <p class="text-sm text-gray-600">${new Date(order.date).toLocaleDateString('fr-FR')}</p>
                            </div>
                            <div class="text-right">
                                <p class="font-bold">${order.total.toFixed(2)} €</p>
                                <span class="inline-block px-2 py-1 text-xs rounded-full ${order.status === 'confirmed' ? 'bg-green-100 text-green-800' : 'bg-yellow-100 text-yellow-800'}">${order.status}</span>
                            </div>
                        </div>
                    `;
                    orderHistory.appendChild(orderElement);
                });
            }
        }

        // Afficher un message d'alerte
        function showAlert(message, type) {
            const alertDiv = document.getElementById('alert');
            const alertMessage = document.getElementById('alert-message');
            const alertIcon = document.getElementById('alert-icon');
            
            alertMessage.textContent = message;
            
            if (type === 'success') {
                alertDiv.className = 'fixed top-4 right-4 p-4 rounded-lg shadow-lg bg-green-500 text-white max-w-sm z-50';
                alertIcon.innerHTML = '<i class="fas fa-check-circle"></i>';
            } else if (type === 'error') {
                alertDiv.className = 'fixed top-4 right-4 p-4 rounded-lg shadow-lg bg-red-500 text-white max-w-sm z-50';
                alertIcon.innerHTML = '<i class="fas fa-exclamation-circle"></i>';
            } else {
                alertDiv.className = 'fixed top-4 right-4 p-4 rounded-lg shadow-lg bg-blue-500 text-white max-w-sm z-50';
                alertIcon.innerHTML = '<i class="fas fa-info-circle"></i>';
            }
            
            alertDiv.classList.remove('hidden');
            
            setTimeout(() => {
                hideAlert();
            }, 5000);
        }

        // Masquer l'alerte
        function hideAlert() {
            document.getElementById('alert').classList.add('hidden');
        }

        // Afficher/masquer l'overlay de chargement
        function showLoading(show) {
            const loadingOverlay = document.getElementById('loading-overlay');
            if (show) {
                loadingOverlay.classList.remove('hidden');
                document.body.classList.add('loading');
            } else {
                loadingOverlay.classList.add('hidden');
                document.body.classList.remove('loading');
            }
        }

        // Initialiser l'application lorsque la page est chargée
        document.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>